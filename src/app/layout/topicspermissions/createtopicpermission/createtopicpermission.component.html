<p-panel>
  <p-header>
    create topics permissions
  </p-header>
  <p-fieldset legend="Select Category/SubCategory/Topic" [toggleable]="true">
    <table id="usersTable">
      <tr>
        <td class="grid-input ">
          <p-radioButton name="toggleFilter" value="Users" [label]="'createByUsers'|translate"
                         (onClick)="basicUserSelection.getActiveUsers()"
                         [(ngModel)]="selectType"></p-radioButton>
        </td>

        <ng-container *ngIf="selectType==='Users'">

          <td class="grid-label">{{'selectUsers'|translate}}</td>
          <td class="grid-input ">
            <p-dropdown optionLabel="firstName" [(ngModel)]="selectedUser"
                           (onClick)="basicUserSelection.getActiveUsers();this.selectedGroup = null;"
                           [options]="basicUserSelection.activeUsers"
                           [style]="{'width':'150px'}">
            </p-dropdown>
          </td>
        </ng-container>

      </tr>
    </table>
    <table id="groupsTable">
      <tr>
        <td class="grid-input ">
          <p-radioButton name="toggleFilter" value="Groups" [label]="'createByGroups'|translate"
                         [(ngModel)]="selectType"></p-radioButton>
        </td>

        <ng-container *ngIf="selectType==='Groups'">

          <td class="grid-label">{{'selectGroups'|translate}}</td>
          <td class="grid-input ">
            <p-dropdown optionLabel="groupName" [(ngModel)]="selectedGroup"
                           (onClick)="basicGroupSelection.getActiveGroups();this.selectedUser=null;"
                           [options]="basicGroupSelection.activeGroups"
                           [style]="{'width':'150px'}">
            </p-dropdown>
          </td>
        </ng-container>
      </tr>
    </table>
    <table>
      <tr>

        <td class="grid-label">{{'MainCat'|translate}}</td>
        <td class="grid-input ">
          <p-dropdown class="minWidth" appendTo="body" (onChange)="updateSubCategory()"
                      placeholder="{{'selectMainCatLabel'|translate}}"
                      [options]="mainCategories" optionLabel="englishLabel"
                      [(ngModel)]="selectedMainCategory">
          </p-dropdown>
        </td>
        <td class="grid-label">{{'SubCat'|translate}}</td>
        <td class="grid-input minWidth">
          <p-dropdown class="minWidth" appendTo="body"
                      placeholder="{{'selectSubCatLabel'|translate}}"
                      (onChange)="updateTopicList()" [options]="subCategories"
                      [(ngModel)]="selectedSubCategory" optionLabel="englishLabel"></p-dropdown>
        </td>
        <td class="grid-label">{{'Topic'|translate}}</td>
        <td class="grid-input minWidth">
          <p-dropdown class="minWidth"
                      placeholder="{{'selectTopicLabel'|translate}}"
                      appendTo="body" [options]="topics" [(ngModel)]="selectedTopic"
                      optionLabel="englishLabel"></p-dropdown>
        </td>

      </tr>
    </table>
    <p-button [disabled]="selectedMainCategory==null ||selectedMainCategory.id==null" [label]="'Prepare'|translate"
              (onClick)="prepare()"></p-button>
  </p-fieldset>

  <app-viewtopicpermission *ngIf="topicsPermissions!=null && topicsPermissions.length>0"
                           [permissionsList]="topicsPermissions"></app-viewtopicpermission>
  <p-footer>
    <p-button [label]="'createPermBTN'|translate" (onClick)="create()"></p-button>
  </p-footer>
</p-panel>
