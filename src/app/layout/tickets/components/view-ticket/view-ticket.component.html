
<table class="formTB" *ngIf="ticket">

  <tr>
    <td class="grid-label">Ticket ID </td>
    <td class="grid-input"><input id="userID" type="text" pInputText name="userID"  [attr.disabled]="true"  [ngModel]="ticket.id" ></td>
    <td class="grid-label">Main Category</td>
    <td class="grid-input"><input id="staffID" type="text"  pInputText name="staffID" [attr.disabled]="true"  [ngModel]="ticket.topic.subCategory.mainCategory.englishLabel" ></td>
    <td class="grid-label">Sub Category</td>
    <td class="grid-input"><input id="subCategory" type="text"  pInputText name="subCategory" [attr.disabled]="true"   [ngModel]="ticket.topic.subCategory.englishLabel"></td>
    <td class="grid-label">Topic</td>
    <td class="grid-input"><input id="topic" type="text"  pInputText name="topic" [attr.disabled]="true"  [ngModel]="ticket.topic.englishLabel"></td>
  </tr>
  <tr>
    <td class="grid-label">Created By</td>
    <td class="grid-input"><input id="createdBy" type="text" pInputText name="createdBy"  [attr.disabled]="true" *ngIf="ticket " [ngModel]="ticket.createdBy" ></td>
    <td class="grid-label">Creation Date</td>
    <td class="grid-input"><input id="creationDate" type="text"  pInputText name="creationDate" [attr.disabled]="true"   [ngModel]="ticket.creationDate | date:'medium'" (ngModelChange)="ticket.creationDate($event)"></td>
    <td class="grid-label">Last Modification</td>
    <td class="grid-input"><input id="lastModification" type="text"  pInputText name="lastModification" [attr.disabled]="true"   [ngModel]="ticket.modificationDate | date:'medium'" (ngModelChange)="ticket.modificationDate($event)"></td>
    <td class="grid-label">Status</td>
    <td class="grid-input"><input id="status" type="text"  pInputText name="status" [attr.disabled]="true"  [ngModel]="utils.findStatus(ticket.currentStatus)"  (ngModelChange)="ticket.currentStatus($event)"></td>
  </tr>
  <tr>
    <td class="grid-label">Subject</td>
    <td class="grid-input"><input id="subject" type="text"  pInputText name="subject" [attr.disabled]="true"  [ngModel]="ticket.subject"></td>
    <td class="grid-label">Ticket Type </td>
    <td class="grid-input"><input id="ticketType" type="text" pInputText name="ticketType"  [attr.disabled]="true"   [ngModel]="utils.findType(ticket.ticketType)" (ngModelChange)="ticket.ticketType($event)"></td>
    <td class="grid-label">Channel</td>
    <td class="grid-input"><input id="channel" type="text"  pInputText name="channel" [attr.disabled]="true"  [ngModel]="ticket.sourceChannel" ></td>
    <td class="grid-label">Priority</td>
    <td class="grid-input"><input id="priority" type="text"  pInputText name="priority" [attr.disabled]="true"   [ngModel]="utils.findPriority(ticket.priority)" (ngModelChange)="ticket.priority($event)"></td>
  </tr>
  <tr>
    <td class="grid-label">Details</td>
    <td class="grid-input" colspan="7"><textarea id="details" type="text"  pInputTextarea  name="details" [attr.disabled]="true"  [ngModel]="ticket.details"> </textarea></td>
  </tr>

  <tr><td colspan="8"><hr/></td></tr>

  <tr>
    <td class="grid-label"> Customer Basic </td>
    <td class="grid-input"><input id="customerBasic" type="text" pInputText name="customerBasic"  [attr.disabled]="true"   [ngModel]="ticket.customerAccount.customerCIF" ></td>
    <td class="grid-label">Customer Name</td>
    <td class="grid-input"><input id="customerName" type="text"  pInputText name="customerName" [attr.disabled]="true"  [ngModel]="ticket.customerAccount.customerNameEn" ></td>
    <td class="grid-label">Customer Mobile</td>
    <td class="grid-input"><input id="customerMobile" type="text"  pInputText name="customerMobile" [attr.disabled]="true"   [ngModel]="ticket.customerAccount.mobile"></td>
    <td class="grid-label">Customer Segment</td>
    <td class="grid-input"><input id="customerSegment" type="text"  pInputText name="customerSegment" [attr.disabled]="true"  [ngModel]="ticket.customerAccount.segment"></td>
  </tr>

  <tr><td colspan="8"><hr/></td></tr>

<tr>
    <td class="grid-label">Original Main Category</td>
    <td class="grid-input"><input id="oMainCategory" type="text"  pInputText name="ostaffID" [attr.disabled]="true"  [ngModel]="ticket.originalTopic.subCategory.mainCategory.englishLabel" ></td>
    <td class="grid-label">Original Sub Category</td>
    <td class="grid-input"><input id="oSubCategory" type="text"  pInputText name="osubCategory" [attr.disabled]="true"   [ngModel]="ticket.originalTopic.subCategory.englishLabel"></td>
    <td class="grid-label">Original Topic</td>
    <td class="grid-input"><input id="oTopic" type="text"  pInputText name="otopic" [attr.disabled]="true"  [ngModel]="ticket.originalTopic.englishLabel"></td>  </tr>
<tr> <td colspan="8"><hr/></td></tr>

  <tr> <td colspan="8">

    <p-accordion>
      <p-accordionTab header="Ticket History" [selected]="false">

        <p-table [value]="ticket.ticketHistoryList">
          <ng-template pTemplate="header">
              <tr>
                <th>History Date</th>
                <th>Action</th>
                <th>Done By</th>
                <th>Old Status</th>
                <th>New Status</th>
                <th>Old Topic</th>
                <th>New Topic</th>
              </tr>
        </ng-template>

         <ng-template pTemplate="body" let-history>
    <tr>
      <td>{{history.creationDate | date:'medium'}}</td>
      <td>{{utils.findAction(history.actionID)}}</td>
      <td>{{history.createdBy}}</td>
      <td>{{utils.findStatus(history.oldStatus)}}</td>
      <td>{{utils.findStatus(history.newStatus)}}</td>
      <td>{{history.oldTopic}}</td>
      <td>{{history.newTopic}}</td>
    </tr>
  </ng-template>
        </p-table>

      </p-accordionTab>
    </p-accordion>

  </td> </tr>

</table>


