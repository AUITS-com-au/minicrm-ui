<p>

  <p-table #dt [value]="ticketList" [paginator]="true" class="dt-selection" selectionMode="single"
           [rows]="10"
           [(selection)]="selectedTicket"
           [lazy]="true"
           (onLazyLoad)="loadCarsLazy($event)"
           (onRowSelect)="setSelectedTicket($event)"
           (onRowUnselect)="setSelectedTicket($event)"
           [totalRecords]="totalRecords"
           [resizableColumns]="true" columnResizeMode="expand"
           [responsive]="true"
           dataKey="id">

    <ng-template pTemplate="header">
      <tr>

        <th *ngFor="let col of sortCols" [pSortableColumn]="col.field"  pResizableColumn >

          <div class="col-header"> {{col.header}}</div>
          <div  *ngIf="col.header != 'Main Categ' && col.header != 'Sub Categ'" >
              <p-sortIcon aria-disabled="true" [field]="col.field" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order" ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
          </div>
        </th>

      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-ticket let-expanded="expanded">
      <tr [pSelectableRow]="ticket">
        <td *ngFor="let col of cols" class="ui-resizable-column">

          <div *ngIf="col.field ==='creationDate' || col.field ==='escalationCalDate'">
            {{ticket[col.field] | date:'medium'}}
          </div>

          <div *ngIf="col.field !='creationDate' && col.field !='escalationCalDate' && col.field !='topic' && col.field !='currentStatus' && col.field !='ticketType'" >
            {{ticket[col.field]}}
          </div>

          <div *ngIf="col.field ==='topic'">
            {{ticket[col.field].englishLabel}}
          </div>

          <div *ngIf="col.field ==='mainCategory'">
            {{ticket['topic'].subCategory.mainCategory.englishLabel}}
          </div>

          <div *ngIf="col.field ==='subCategory'">
            {{ticket['topic'].subCategory.englishLabel}}
          </div>

          <div *ngIf="col.field ==='currentStatus'">
            {{utils.findStatus(ticket['currentStatus'])}}
          </div>

          <div *ngIf="col.field ==='ticketType'">
            {{utils.findType(ticket['ticketType'])}}
          </div>


        </td>
      </tr>
    </ng-template>
 </p-table>


</p>


