<p-accordion>
  <p-accordionTab header="{{'TicketsCategories' | translate}}" [selected]="true">
    <table class="minWidth">
      <tr>
        <td class="grid-label">{{'MainCat'|translate}}</td>
        <td class="grid-input ">
          <p-dropdown (onChange)="updateSubCategory()" [options]="mainCategories" [(ngModel)]="selectedMainCategory" >
            <ng-template let-rprtOption ptemplate="item">
             {{utils.printLocLabel(rprtOption)}}
            </ng-template>
          </p-dropdown>
        </td>
        <td class="grid-label">{{'SubCat'|translate}}</td>
        <td class="grid-input minWidth">
          <p-dropdown (onChange)="updateTopicList()" [options]="subCategories" [(ngModel)]="selectedSubCategory"
                      optionLabel="englishLabel"></p-dropdown>
        </td>
        <td class="grid-label">{{'Topic'|translate}}</td>
        <td class="grid-input minWidth">
          <p-dropdown [options]="topics" [(ngModel)]="selectedTopic" optionLabel="englishLabel"></p-dropdown>
        </td>
        <td colspan="2" style="padding: 0px 40px">
          <p-button label="Apply" (onClick)="applyGlobalFilter()"></p-button>
        </td>
      </tr>
    </table>
  </p-accordionTab>
</p-accordion>

<p-tabView (onChange)="handleChange($event)" id="ticketsTabsView" [(activeIndex)]="selectedTab"
           (onClose)="handleClose($event)">

  <p-tabPanel [header]="item.header" *ngFor="let item of items; let i = index" #tab
              [headerStyleClass]="item.type"
              [selected]="i===0" [closable]="item.closable">

    <ng-template pTemplate="content">
      <app-dy-ticket-table *ngIf="item.type == 'filters' && item.ticketFilter != null" [ticketList]="ticketList"
                           [ticketFilters]="item.ticketFilter" [totalRecords]="totalRecords"

                           (selectTicketEmitter)="setSelectedTicket($event)"
                           (eventEmitter)="getTicketList($event)"></app-dy-ticket-table>
      <app-view-ticket *ngIf="item.type == 'viewTicket'" [ticketID]="this.selectedTicketId"
                       [ticketListParent]="this"></app-view-ticket>
      <app-create-ticket *ngIf="item.type == 'NewTicket'"></app-create-ticket>
    </ng-template>

  </p-tabPanel>
</p-tabView>


<p-panel class="btnPanel no_style">

  <button type="button" pButton icon="fa fa-plus-square" (click)="createNewTicket()" class="ui-button-rounded btn-create"
          label="{{'CreateTicket' | translate}}" [disabled]="disableCreateTicketBTN"></button>
  <button type="button" pButton icon="fa fa-folder-open-o" (click)="openTicketForView()" class="ui-button-rounded"
          label="{{'ViewTicket' | translate}}" [disabled]="disableViewTicketBTN"></button>

</p-panel>

